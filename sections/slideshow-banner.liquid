
{{ 'section-image-banner.css' | asset_url | stylesheet_tag }}
{{ 'component-slider.css' | asset_url | stylesheet_tag }}
{{ 'component-slideshow-banner.css' | asset_url | stylesheet_tag }}

{%- liquid 
	assign slides_per_view = 1	
	assign slides_per_view_tb = section.settings.slides_per_view
	assign slides_per_view_pc = section.settings.slides_per_view

	if section.blocks.size < slides_per_view
		assign slides_per_view = section.blocks.size
	endif

	if section.blocks.size < slides_per_view_tb
		assign slides_per_view_tb = section.blocks.size
	endif

	if section.blocks.size < slides_per_view_pc
		assign slides_per_view_pc = section.blocks.size
	endif
-%}

{%- style -%}
  #shopify-section-{{ section.id }} {
		--padding-top: {{ section.settings.padding_top }}px;
		--padding-bottom: {{ section.settings.padding_bottom }}px;
		--padding-top-mb: {{ section.settings.padding_top_mb }}px;
		--padding-bottom-mb: {{ section.settings.padding_bottom_mb }}px;

		/* slider setup */
		--slides-per-view: {{ slides_per_view }};
		--slides-per-view-tb: {{ slides_per_view_tb }};
		--slides-per-view-pc: {{ slides_per_view_pc }};
		--swiper-autoplay-delay: {{ section.settings.change_slides_speed }}s;
		/* end slider setup */
	}

	{%- if section.settings.slide_height == 'adapt_image' and section.blocks.first.settings.image != blank -%}
    @media screen and (max-width: 749px) {
      #Slider-{{ section.id }}:not(.banner--mobile-bottom) .slideshow-banner__item-wrapper::before,
      #Slider-{{ section.id }} .media::before {
        padding-bottom: {{ 1 | divided_by: section.blocks.first.settings.image.aspect_ratio | times: 100 }}%;
        content: '';
        display: block;
      }

			{%- if section.blocks.first.settings.image_mb != blank -%}
				#Slider-{{ section.id }}:not(.banner--mobile-bottom) .slideshow-banner__item-wrapper::before,
				#Slider-{{ section.id }} .media::before {
					padding-bottom: {{ 1 | divided_by: section.blocks.first.settings.image_mb.aspect_ratio | times: 100 }}%;
				}
			{%- endif -%}
    }

    @media screen and (min-width: 750px) {
      #Slider-{{ section.id }} .slideshow-banner__item-wrapper::before,
      #Slider-{{ section.id }} .media::before {
        padding-bottom: {{ 1 | divided_by: section.blocks.first.settings.image.aspect_ratio | times: 100 }}%;
        content: '';
        display: block;
      }
    }
	{%- endif -%}
{%- endstyle -%}

<div class="slideshow-banner color-{{ section.settings.color_scheme }} gradient section-responsive-padding {% if settings.animations_reveal_on_scroll %} scroll-trigger animate--fade-in{% endif %}">
	<slideshow-banner
		class="slideshow-banner__slider slideshow swiper {% if section.settings.show_text_below %} mobile-text-below{% endif %}"
		role="region"
		aria-roledescription="{{ 'sections.slideshow.carousel' | t }}"
		aria-label="{{ section.settings.accessibility_info | escape }}"
		data-autoplay="{{ section.settings.auto_rotate }}"
		data-loop="{{ section.settings.loop }}"
		data-speed="{{ section.settings.change_slides_speed }}"
		data-slides-per-view-sm="{{ section.settings.slides_per_view }}"
		data-slides-per-view-lg="{{ section.settings.slides_per_view }}"
		data-space-between-pc="{{ settings.spacing_grid_horizontal }}" 
		data-space-between="{{ settings.spacing_grid_horizontal }}"
		data-efect="slide"
	>
		<div
			class="swiper-wrapper {% if section.settings.show_text_below %} banner--mobile-bottom {% endif %}{% if section.blocks.first.settings.image == blank %} slideshow--placeholder{% endif %}"
			id="Slider-{{ section.id }}"
			aria-live="polite"
			aria-atomic="true"
		>
			{%- for block in section.blocks -%}
				
				<div
					class="swiper-slide slideshow-banner__item slideshow-banner__item--{{ section.settings.slide_height }} {% if section.settings.show_text_below and section.settings.color_scheme == block.settings.color_scheme %} banner--mobile-standard {% endif %} {% if section.settings.color_scheme == block.settings.color_scheme %} banner--equal-bg{% endif %}"
					id="Slide-{{ section.id }}-{{ forloop.index }}"
					{{ block.shopify_attributes }}
					role="group"
					aria-roledescription="{{ 'sections.slideshow.slide' | t }}"
					aria-label="{{ forloop.index }} {{ 'general.slider.of' | t }} {{ forloop.length }}"
					tabindex="-1"
				>
					<style>
						#Slide-{{ section.id }}-{{ forloop.index }} .slideshow__media {
							--overlay-opacity: {{ block.settings.image_overlay_opacity | divided_by: 100.0 }}; 
						}
					</style>
					<div class="slideshow-banner__item-wrapper slideshow-banner__item-wrapper--{{ section.settings.box_align }}">
						<div class="slideshow__media banner__media media{% if block.settings.image == blank %} placeholder{% endif %}{% if section.settings.image_behavior != 'none' %} animate--{{ section.settings.image_behavior }}{% endif %}">
							{%- if block.settings.image -%}
								{%- liquid
									assign height = block.settings.image.width | divided_by: block.settings.image.aspect_ratio | round
									assign class = ''
									if block.settings.image_mb != blank 
									assign class = 'small-hide'
									endif

									if section.settings.image_behavior == 'ambient'
										assign sizes = '120vw'
										assign widths = '450, 660, 900, 1320, 1800, 2136, 2400, 3600, 7680'
									else
										assign sizes = '100vw'
										assign widths = '375, 550, 750, 1100, 1500, 1780, 2000, 3000, 3840'
									endif
									assign fetch_priority = 'high'
								-%}
									{{
										block.settings.image
										| image_url: width: 3840
										| image_tag: height: height, sizes: sizes, widths: widths, fetchpriority: fetch_priority, alt: block.settings.image.alt, class: class
									}}
							{%- else -%}
								{%- assign placeholder_slide = forloop.index | modulo: 2 -%}
								{%- if placeholder_slide == 1 -%}
									{{ 'hero-apparel-2' | placeholder_svg_tag: 'placeholder-svg' }}
								{%- else -%}
									{{ 'hero-apparel-1' | placeholder_svg_tag: 'placeholder-svg' }}
								{%- endif -%}
							{%- endif -%}

							{%- if block.settings.image_mb != blank  -%}
								{%- liquid
									assign height = block.settings.image_mb.width | divided_by: block.settings.image_mb.aspect_ratio | round
									if section.settings.image_behavior == 'ambient'
										assign sizes = '120vw'
										assign widths = '450, 660, 900, 1320, 1800, 2136, 2400, 3600, 7680'
									else
										assign sizes = '100vw'
										assign widths = '375, 550, 750, 1100, 1500, 1780, 2000, 3000, 3840'
									endif
									assign fetch_priority = 'high'
								-%}
								{%- if forloop.first %}
									{{
										block.settings.image_mb
										| image_url: width: 1200
										| image_tag: height: height, sizes: sizes, widths: widths, fetchpriority: fetch_priority, alt: block.settings.image_mb.alt, class: 'medium-hide large-up-hide'
									}}
								{%- else -%}
									{{
										block.settings.image_mb
										| image_url: width: 1200
										| image_tag: height: height, sizes: sizes, widths: widths, alt: block.settings.image_mb.alt, class: 'medium-hide large-up-hide'
									}}
								{%- endif -%}
							{%- endif -%}
						</div>

						<div class="slideshow__text-wrapper page-width{% if block.settings.show_text_box == false %} banner--desktop-transparent{% endif %}">
							<div class="slideshow__text banner__box content-container content-container--full-width-mobile color-{{ block.settings.color_scheme }} gradient slideshow__text--{{ block.settings.text_alignment }} slideshow__text-mobile--{{ block.settings.text_alignment_mobile }}">
								{%- if block.settings.heading != blank -%}
									<h2 class="banner__heading inline-richtext {{ block.settings.heading_size }} {{ block.settings.heading_font_family }} clr-{{ block.settings.heading_color }} {{ block.settings.heading_weight }}">
										{{ block.settings.heading }}
									</h2>
								{%- endif -%}
								{%- if block.settings.subheading != blank -%}
									<div class="banner__text rte clr-{{ block.settings.text_color }}" {{ block.shopify_attributes }}>
										<p>{{ block.settings.subheading }}</p>
									</div>
								{%- endif -%}
								{%- if block.settings.button_label != blank or block.settings.button_2_label != blank-%}
									<div class="banner__buttons">
										{%- if block.settings.button_label != blank -%}
											<a
												{% if block.settings.link %}
													href="{{ block.settings.link }}"
												{% else %}
													role="link" aria-disabled="true"
												{% endif %}
												class="button button--{{ block.settings.button_style }} button--{{ block.settings.button_outline }} button--animate-{{ settings.animations_hover_elements }}"
											>
												{%- if settings.animations_hover_elements == 'glide' -%}
													<span class="button__before"> 
														{{- block.settings.button_label | escape -}}
													</span>
													<span class="button__after">
														{{- block.settings.button_label | escape -}}
													</span>
												{%- else -%}
													<span>
														{{- block.settings.button_label | escape -}}
													</span>
												{%- endif -%}
											</a>
										{%- endif -%}
										{%- if block.settings.button_2_label != blank -%}
											<a
												{% if block.settings.link_2 %}
													href="{{ block.settings.link_2 }}"
												{% else %}
													role="link" aria-disabled="true"
												{% endif %}
												class="button button--{{ block.settings.button_2_style }} button--{{ block.settings.button_2_outline }} button--animate-{{ settings.animations_hover_elements }}"
											>

												{%- if settings.animations_hover_elements == 'glide' -%}
													<span class="button__before"> 
														{{- block.settings.button_2_label | escape -}}
													</span>
													<span class="button__after">
														{{- block.settings.button_2_label | escape -}}
													</span>
												{%- else -%}
													<span>
														{{- block.settings.button_2_label | escape -}}
													</span>
												{%- endif -%}
											</a>
										{%- endif -%}
									</div>
								{%- endif -%}
							</div>
						</div>
					</div>
				</div>
			{%- endfor -%}
		</div>
		<div class="swiper-controls">
			<div class="swiper-pagination"></div>
		</div>

	</slideshow-banner>
</div>

{%- if request.design_mode -%}
  <script src="{{ 'theme-editor.js' | asset_url }}" defer="defer"></script>
{%- endif -%}

<script src="{{ 'slideshow-banner.js' | asset_url }}" defer="defer"></script>

{% schema %}
{
  "name": "Slideshow banner",
  "tag": "section",
  "class": "section",
  "disabled_on": {
    "groups": [
      "header",
      "footer"
    ]
  },
  "settings": [
		{
			"type": "color_scheme",
			"id": "color_scheme",
			"label": "t:sections.all.colors.label",
			"default": "scheme-1"
		},
    {
      "type": "select",
      "id": "slide_height",
      "options": [
        {
          "value": "adapt_image",
          "label": "t:sections.slideshow.settings.slide_height.options__1.label"
        },
        {
          "value": "small",
          "label": "t:sections.slideshow.settings.slide_height.options__2.label"
        },
        {
          "value": "medium",
          "label": "t:sections.slideshow.settings.slide_height.options__3.label"
        },
        {
          "value": "large",
          "label": "t:sections.slideshow.settings.slide_height.options__4.label"
        }
      ],
      "default": "medium",
      "label": "t:sections.slideshow.settings.slide_height.label"
    },
    {
      "type": "checkbox",
      "id": "loop",
      "label": "Loop",
      "default": true,
			"info": "For correct work needs at least 1.5 times the number of slides as the number of visible slides"
    },
    {
      "type": "checkbox",
      "id": "auto_rotate",
      "label": "t:sections.slideshow.settings.auto_rotate.label",
      "default": false
    },
		{
			"type": "range",
			"id": "slides_per_view",
			"min": 1,
			"max": 1.5,
			"step": 0.1,
			"label": "Slides per view",
			"default": 1.2
		},
    {
      "type": "range",
      "id": "change_slides_speed",
      "min": 5,
      "max": 9,
      "step": 2,
      "unit": "s",
      "label": "t:sections.slideshow.settings.change_slides_speed.label",
      "default": 5
    },
	{
		"type": "select",
		"id": "box_align",
		"options": [
			{
				"value": "top-left",
				"label": "Top left"
			},
			{
				"value": "bottom-left",
				"label": "Bottom left"
			},
			{
				"value": "middle-left",
				"label": "t:sections.slideshow.blocks.slide.settings.box_align.options__4.label"
			},
			{
				"value": "middle-center",
				"label": "t:sections.slideshow.blocks.slide.settings.box_align.options__5.label"
			},
			{
				"value": "middle-right",
				"label": "t:sections.slideshow.blocks.slide.settings.box_align.options__6.label"
			},
			{
				"value": "top-right",
				"label": "Top right"
			},
			{
				"value": "bottom-right",
				"label": "Bottom right"
			}
		],
		"default": "middle-center",
		"label": "t:sections.slideshow.blocks.slide.settings.box_align.label",
		"info": "t:sections.slideshow.blocks.slide.settings.box_align.info"
	},
    {
      "type": "header",
      "content": "t:sections.all.animation.content"
    },
    {
      "type": "select",
      "id": "image_behavior",
      "options": [
        {
          "value": "none",
          "label": "t:sections.all.animation.image_behavior.options__1.label"
        },
        {
          "value": "ambient",
          "label": "t:sections.all.animation.image_behavior.options__2.label"
        }
      ],
      "default": "none",
      "label": "t:sections.all.animation.image_behavior.label"
    },
    {
      "type": "header",
      "content": "t:sections.slideshow.settings.mobile.content"
    },
    {
      "type": "checkbox",
      "id": "show_text_below",
      "label": "t:sections.slideshow.settings.show_text_below.label",
      "default": true
    },
    {
      "type": "header",
      "content": "t:sections.slideshow.settings.accessibility.content"
    },
    {
      "type": "text",
      "id": "accessibility_info",
      "label": "t:sections.slideshow.settings.accessibility.label",
      "info": "t:sections.slideshow.settings.accessibility.info",
      "default": "Slideshow about our brand"
    },
		{
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 74
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 74
    },
		{
      "type": "range",
      "id": "padding_top_mb",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Top padding mobile",
      "default": 56
    },
    {
      "type": "range",
      "id": "padding_bottom_mb",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Bottom padding mobile",
      "default": 56
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "t:sections.slideshow.blocks.slide.name",
      "limit": 8,
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "t:sections.slideshow.blocks.slide.settings.image.label"
        },
        {
          "type": "image_picker",
          "id": "image_mb",
          "label": "Image mobile"
        },
        {
          "type": "inline_richtext",
          "id": "heading",
          "default": "Image slide",
          "label": "t:sections.slideshow.blocks.slide.settings.heading.label"
        },
				{
					"type": "select",
					"id": "heading_font_family",
					"label": "Heading font family",
					"options": [
						{
						"value": "font-heading",
						"label": "Heading"
						},
						{
						"value": "font-body",
						"label": "Body"
						}
					],
					"default": "font-heading"
				},
        {
          "type": "select",
          "id": "heading_size",
          "options": [
						{
							"value": "h3",
							"label": "t:sections.all.heading_size.options__1.label"
						},
						{
							"value": "h2",
							"label": "t:sections.all.heading_size.options__2.label"
						},
						{
							"value": "h1",
							"label": "t:sections.all.heading_size.options__3.label"
						}
          ],
          "default": "h1",
          "label": "t:sections.all.heading_size.label"
        },
				{
          "type": "select",
          "id": "heading_color",
          "options": [
            {
              "value": "foreground",
              "label": "Text"
            },
            {
              "value": "foreground-secondary",
              "label": "Text secondary"
            },
            {
              "value": "heading",
              "label": "Heading"
            }
          ],
          "default": "foreground",
          "label": "Heading color"
        },
				{
					"type": "select",
					"id": "heading_weight",
					"options": [
						{
							"value": "fw-400",
							"label": "Normal"
						},
						{
							"value": "fw-500",
							"label": "Medium"
						},
						{
							"value": "fw-600",
							"label": "Semi bold"
						},
						{
							"value": "fw-700",
							"label": "Bold"
						}
					],
					"default": "fw-600",
					"label": "Font weight"
				},
        {
          "type": "inline_richtext",
          "id": "subheading",
          "default": "Tell your brand's story through images",
          "label": "t:sections.slideshow.blocks.slide.settings.subheading.label"
        },	
				{
          "type": "select",
          "id": "text_color",
          "options": [
            {
              "value": "foreground",
              "label": "Text"
            },
            {
              "value": "foreground-secondary",
              "label": "Text secondary"
            },
            {
              "value": "heading",
              "label": "Heading"
            }
          ],
          "default": "foreground-secondary",
          "label": "Subheading color"
        },
        {
          "type": "checkbox",
          "id": "show_text_box",
          "label": "t:sections.slideshow.blocks.slide.settings.show_text_box.label",
          "default": true
        },
        {
          "type": "select",
          "id": "text_alignment",
          "options": [
            {
              "value": "left",
              "label": "t:sections.slideshow.blocks.slide.settings.text_alignment.option_1.label"
            },
            {
              "value": "center",
              "label": "t:sections.slideshow.blocks.slide.settings.text_alignment.option_2.label"
            },
            {
              "value": "right",
              "label": "t:sections.slideshow.blocks.slide.settings.text_alignment.option_3.label"
            }
          ],
          "default": "center",
          "label": "t:sections.slideshow.blocks.slide.settings.text_alignment.label"
        },
        {
          "type": "range",
          "id": "image_overlay_opacity",
          "min": 0,
          "max": 100,
          "step": 10,
          "unit": "%",
          "label": "t:sections.slideshow.blocks.slide.settings.image_overlay_opacity.label",
          "default": 0
        },
        {
          "type": "color_scheme",
          "id": "color_scheme",
          "label": "t:sections.all.colors.label",
          "default": "scheme-1"
        },
		{
			"type": "header",
			"content": "Button settings",
		},
        {
          "type": "text",
          "id": "button_label",
          "default": "Button Label",
          "label": "t:sections.slideshow.blocks.slide.settings.button_label.label",
          "info": "t:sections.slideshow.blocks.slide.settings.button_label.info"
        },
        {
          "type": "url",
          "id": "link",
          "label": "t:sections.slideshow.blocks.slide.settings.link.label"
        },
				{
					"type": "select",
					"id": "button_style",
					"options": [
						{
							"value": "primary",
							"label": "Primary"
						},
						{
							"value": "secondary",
							"label": "Secondary"
						}
					],
					"default": "primary",
					"label": "Button style"
				},
				{
					"type": "select",
					"id": "button_outline",
					"label": "Button outline",
					"options": [
						{
						"value": "outline-none",
						"label": "None"
						},
						{
						"value": "outline",
						"label": "Outline"
						},
						{
						"value": "outline-hover",
						"label": "Outline on hover"
						}
					],
					"default": "outline-hover"
        },
        {
          "type": "text",
          "id": "button_2_label",
          "default": "Button Label",
          "label": "t:sections.slideshow.blocks.slide.settings.button_label.label",
          "info": "t:sections.slideshow.blocks.slide.settings.button_label.info"
        },
        {
          "type": "url",
          "id": "link_2",
          "label": "t:sections.slideshow.blocks.slide.settings.link.label"
        },
				{
					"type": "select",
					"id": "button_2_style",
					"options": [
						{
							"value": "primary",
							"label": "Primary"
						},
						{
							"value": "secondary",
							"label": "Secondary"
						}
					],
					"default": "secondary",
					"label": "Button style"
				},
				{
          "type": "select",
          "id": "button_2_outline",
          "label": "Button outline",
					"options": [
						{
						"value": "outline-none",
						"label": "None"
						},
						{
						"value": "outline",
						"label": "Outline"
						},
						{
						"value": "outline-hover",
						"label": "Outline on hover"
						}
					],
					"default": "outline"
        },			
        {
          "type": "header",
          "content": "t:sections.slideshow.settings.mobile.content"
        },
        {
          "type": "select",
          "id": "text_alignment_mobile",
          "options": [
            {
              "value": "left",
              "label": "t:sections.slideshow.blocks.slide.settings.text_alignment_mobile.options__1.label"
            },
            {
              "value": "center",
              "label": "t:sections.slideshow.blocks.slide.settings.text_alignment_mobile.options__2.label"
            },
            {
              "value": "right",
              "label": "t:sections.slideshow.blocks.slide.settings.text_alignment_mobile.options__3.label"
            }
          ],
          "default": "center",
          "label": "t:sections.slideshow.blocks.slide.settings.text_alignment_mobile.label"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Slideshow banner",
      "blocks": [
        {
          "type": "slide"
        },
        {
          "type": "slide"
        },
        {
          "type": "slide"
        },
        {
          "type": "slide"
        },
        {
          "type": "slide"
        }
      ]
    }
  ]
}
{% endschema %}